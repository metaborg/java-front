module refret/intellij/moveInstanceMethod/TwoParams_after

test TwoParams_after: parsing [[
  test;
  [Test]
      class Foreign {
        void foo(MoveMethodTest moveMethodTest, MoveMethodTest.Inner inner) {
           moveMethodTest.bar (inner);
        }
    }
  
    class MoveMethodTest {
        void bar(Inner inner) {}
  
        class Inner {
        }
    }
]] parse succeeds

test TwoParams_after: default analysis [[
  test;
  [Test]
      class Foreign {
        void foo(MoveMethodTest moveMethodTest, MoveMethodTest.Inner inner) {
           moveMethodTest.bar (inner);
        }
    }
  
    class MoveMethodTest {
        void bar(Inner inner) {}
  
        class Inner {
        }
    }
]] analysis succeeds

test TwoParams_after: test analysis [[
  test;
  [Test]
      class Foreign {
        void foo(MoveMethodTest moveMethodTest, MoveMethodTest.Inner inner) {
           moveMethodTest.bar (inner);
        }
    }
  
    class MoveMethodTest {
        void bar(Inner inner) {}
  
        class Inner {
        }
    }
]] run test-analyze to SUCCEED()

test TwoParams_after: refret test 1 [[
  test;
  [Test]
      class Foreign {
        void foo(MoveMethodTest [[moveMethodTest]], MoveMethodTest.Inner inner) {
           [[bar]] (inner);
        }
    }
  
    class MoveMethodTest {
        void [[bar]](Inner inner) {}
  
        class Inner {
        }
    }
]] run fix-reference(|#2, #3, #1) to [[
  test;
  [Test]
      class Foreign {
        void foo(MoveMethodTest moveMethodTest, MoveMethodTest.Inner inner) {
           moveMethodTest.bar (inner);
        }
    }
  
    class MoveMethodTest {
        void bar(Inner inner) {}
  
        class Inner {
        }
    }
]]

