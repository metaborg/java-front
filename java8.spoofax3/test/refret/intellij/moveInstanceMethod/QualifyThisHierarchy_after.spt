module refret/intellij/moveInstanceMethod/QualifyThisHierarchy_after

test parse: QualifyThisHierarchy_after [[
  test;
  [D]
      public class D {
      protected void iAmProtected() {
      }
    }
  
    class DImpl extends D {
    }
  
    class F {
  
        void foo(D d) {
          class MyRunnable {
            public void run() {
              d.iAmProtected();
            }
          }
        }
    }
]] parse succeeds

test analysis 1: QualifyThisHierarchy_after [[
  test;
  [D]
      public class D {
      protected void iAmProtected() {
      }
    }
  
    class DImpl extends D {
    }
  
    class F {
  
        void foo(D d) {
          class MyRunnable {
            public void run() {
              d.iAmProtected();
            }
          }
        }
    }
]] analysis succeeds

test analysis 2: QualifyThisHierarchy_after [[
  test;
  [D]
      public class D {
      protected void iAmProtected() {
      }
    }
  
    class DImpl extends D {
    }
  
    class F {
  
        void foo(D d) {
          class MyRunnable {
            public void run() {
              d.iAmProtected();
            }
          }
        }
    }
]] run test-analyze to SUCCEED()

test refret 0: QualifyThisHierarchy_after [[
  test;
  [D]
      public class D {
      protected void [[iAmProtected]]() {
      }
    }
  
    class DImpl extends D {
    }
  
    class F {
  
        void foo(D [[d]]) {
          class MyRunnable {
            public void run() {
              [[iAmProtected]]();
            }
          }
        }
    }
]] run fix-reference(|#3, #1, #2) to [[
  test;
  [D]
      public class D {
      protected void iAmProtected() {
      }
    }
  
    class DImpl extends D {
    }
  
    class F {
  
        void foo(D d) {
          class MyRunnable {
            public void run() {
              d.iAmProtected();
            }
          }
        }
    }
]]

