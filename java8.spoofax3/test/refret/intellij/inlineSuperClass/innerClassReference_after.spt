module refret/intellij/inlineSuperClass/innerClassReference_after

test innerClassReference_after: parsing [[
  test;
  [Test]
      class Test {
       public void contextChild() {
          StInner inner1 = new StInner();
          Test.InstInner inner2 = this.new InstInner();
       }
  
        void foo() {
           StInner inner1 = new StInner();
           Test.InstInner inner2 = this.new InstInner();
        }
  
        public static class StInner {}
  
        public class InstInner {}
    }
]] parse succeeds

test innerClassReference_after: default analysis [[
  test;
  [Test]
      class Test {
       public void contextChild() {
          StInner inner1 = new StInner();
          Test.InstInner inner2 = this.new InstInner();
       }
  
        void foo() {
           StInner inner1 = new StInner();
           Test.InstInner inner2 = this.new InstInner();
        }
  
        public static class StInner {}
  
        public class InstInner {}
    }
]] analysis succeeds

test innerClassReference_after: test analysis [[
  test;
  [Test]
      class Test {
       public void contextChild() {
          StInner inner1 = new StInner();
          Test.InstInner inner2 = this.new InstInner();
       }
  
        void foo() {
           StInner inner1 = new StInner();
           Test.InstInner inner2 = this.new InstInner();
        }
  
        public static class StInner {}
  
        public class InstInner {}
    }
]] run test-analyze to SUCCEED()

test innerClassReference_after: refret test 1 [[
  test;
  [Test]
      class Test {
       public void contextChild() {
          [[StInner]] inner1 = new StInner();
          Test.InstInner inner2 = this.new InstInner();
       }
  
        void foo() {
           StInner inner1 = new StInner();
           Test.InstInner inner2 = this.new InstInner();
        }
  
        public static class [[StInner]] {}
  
        public class InstInner {}
    }
]] run fix-reference(|#1, #2) to [[
  test;
  [Test]
      class Test {
       public void contextChild() {
          StInner inner1 = new StInner();
          Test.InstInner inner2 = this.new InstInner();
       }
  
        void foo() {
           StInner inner1 = new StInner();
           Test.InstInner inner2 = this.new InstInner();
        }
  
        public static class StInner {}
  
        public class InstInner {}
    }
]]

test innerClassReference_after: refret test 2 [[
  test;
  [Test]
      class Test {
       public void contextChild() {
          StInner inner1 = new StInner();
          [[InstInner]] inner2 = this.new InstInner();
       }
  
        void foo() {
           StInner inner1 = new StInner();
           Test.InstInner inner2 = this.new InstInner();
        }
  
        public static class StInner {}
  
        public class [[InstInner]] {}
    }
]] run fix-reference(|#1, #2) to [[
  test;
  [Test]
      class Test {
       public void contextChild() {
          StInner inner1 = new StInner();
          Test.InstInner inner2 = this.new InstInner();
       }
  
        void foo() {
           StInner inner1 = new StInner();
           Test.InstInner inner2 = this.new InstInner();
        }
  
        public static class StInner {}
  
        public class InstInner {}
    }
]]

