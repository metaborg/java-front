module refret/intellij/inlineSuperClass/newArrayComplexDimensionsExpr_after

test parse: newArrayComplexDimensionsExpr_after [[
  test;
  [Test]
      class Test {
        static int bar(){return 1;}
  
        void foo() {
          Test s = new Test();
          s.bar();
        }
    }
  [Usage]
      class Usage {
      void ba() {
        Test[][] s = new Test[ Test.bar()][];
      }
    }
]] parse succeeds

test analysis 1: newArrayComplexDimensionsExpr_after [[
  test;
  [Test]
      class Test {
        static int bar(){return 1;}
  
        void foo() {
          Test s = new Test();
          s.bar();
        }
    }
  [Usage]
      class Usage {
      void ba() {
        Test[][] s = new Test[ Test.bar()][];
      }
    }
]] analysis succeeds

test analysis 2: newArrayComplexDimensionsExpr_after [[
  test;
  [Test]
      class Test {
        static int bar(){return 1;}
  
        void foo() {
          Test s = new Test();
          s.bar();
        }
    }
  [Usage]
      class Usage {
      void ba() {
        Test[][] s = new Test[ Test.bar()][];
      }
    }
]] run test-analyze to SUCCEED()

test refret 0: newArrayComplexDimensionsExpr_after [[
  test;
  [Test]
      class Test {
        static int [[bar]](){return 1;}
  
        void foo() {
          Test s = new Test();
          s.bar();
        }
    }
  [Usage]
      class Usage {
      void ba() {
        Test[][] s = new Test[ [[bar]]()][];
      }
    }
]] run fix-reference(|#2, #1) to [[
  test;
  [Test]
      class Test {
        static int bar(){return 1;}
  
        void foo() {
          Test s = new Test();
          s.bar();
        }
    }
  [Usage]
      class Usage {
      void ba() {
        Test[][] s = new Test[ Test.bar()][];
      }
    }
]]

