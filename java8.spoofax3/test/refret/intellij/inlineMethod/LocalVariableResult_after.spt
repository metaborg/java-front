module refret/intellij/inlineMethod/LocalVariableResult_after

test LocalVariableResult_after: parsing [[
  test;
  [Test]
      class A {
  
        Integer f(int i) {
            Integer result;
            if (i > 0) {
                result = new Integer(i);
            }
            else {
                Integer result;
                result = new Integer(0);
                result = result;
            }
            return result;
        }
  
    }
]] parse succeeds

test LocalVariableResult_after: default analysis [[
  test;
  [Test]
      class A {
  
        Integer f(int i) {
            Integer result;
            if (i > 0) {
                result = new Integer(i);
            }
            else {
                Integer result;
                result = new Integer(0);
                result = result;
            }
            return result;
        }
  
    }
]] analysis succeeds

test LocalVariableResult_after: test analysis [[
  test;
  [Test]
      class A {
  
        Integer f(int i) {
            Integer result;
            if (i > 0) {
                result = new Integer(i);
            }
            else {
                Integer result;
                result = new Integer(0);
                result = result;
            }
            return result;
        }
  
    }
]] run test-analyze to SUCCEED()

test LocalVariableResult_after: refret test 1 [[
  test;
  [Test]
      class A {
  
        Integer f(int i) {
            Integer result;
            if (i > 0) {
                [[result]] = new Integer(i);
            }
            else {
                Integer [[result]];
                result = new Integer(0);
                result = result;
            }
            return result;
        }
  
    }
]] run fix-reference(|#1, #2) to [[
  test;
  [Test]
      class A {
  
        Integer f(int i) {
            Integer result;
            if (i > 0) {
                result = new Integer(i);
            }
            else {
                Integer result;
                result = new Integer(0);
                result = result;
            }
            return result;
        }
  
    }
]]

test LocalVariableResult_after: refret test 2 [[
  test;
  [Test]
      class A {
  
        Integer f(int i) {
            Integer result;
            if (i > 0) {
                result = new Integer(i);
            }
            else {
                Integer [[result]];
                [[result]] = new Integer(0);
                result = result;
            }
            return result;
        }
  
    }
]] run fix-reference(|#2, #1) to [[
  test;
  [Test]
      class A {
  
        Integer f(int i) {
            Integer result;
            if (i > 0) {
                result = new Integer(i);
            }
            else {
                Integer result;
                result = new Integer(0);
                result = result;
            }
            return result;
        }
  
    }
]]

test LocalVariableResult_after: refret test 3 [[
  test;
  [Test]
      class A {
  
        Integer f(int i) {
            Integer result;
            if (i > 0) {
                result = new Integer(i);
            }
            else {
                Integer [[result]];
                result = new Integer(0);
                [[result]] = result;
            }
            return result;
        }
  
    }
]] run fix-reference(|#2, #1) to [[
  test;
  [Test]
      class A {
  
        Integer f(int i) {
            Integer result;
            if (i > 0) {
                result = new Integer(i);
            }
            else {
                Integer result;
                result = new Integer(0);
                result = result;
            }
            return result;
        }
  
    }
]]

test LocalVariableResult_after: refret test 4 [[
  test;
  [Test]
      class A {
  
        Integer f(int i) {
            Integer result;
            if (i > 0) {
                result = new Integer(i);
            }
            else {
                Integer [[result]];
                result = new Integer(0);
                result = [[result]];
            }
            return result;
        }
  
    }
]] run fix-reference(|#2, #1) to [[
  test;
  [Test]
      class A {
  
        Integer f(int i) {
            Integer result;
            if (i > 0) {
                result = new Integer(i);
            }
            else {
                Integer result;
                result = new Integer(0);
                result = result;
            }
            return result;
        }
  
    }
]]

